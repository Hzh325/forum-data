<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>极简论坛</title>
    <!-- 内置 Material Design 样式 -->
    <style>
        [精简的 Material 样式代码...]
    </style>
</head>
<body>
    <div class="container">
        <!-- 发帖表单 -->
        <div class="card">
            <textarea id="postContent" placeholder="输入帖子内容..."></textarea>
            <button onclick="createPost()">发布</button>
        </div>

        <!-- 帖子列表 -->
        <div id="posts" class="posts-container"></div>
    </div>

    <script>
        // 配置信息
        const CONFIG = {
            REPO: "你的用户名/forum-data",
            TOKEN: "ghp_你的Token"
        };

        // 提交新帖子
        async function createPost() {
            const content = document.getElementById('postContent').value;
            if (!content) return;

            // 调用 GitHub API
            await fetch(`https://api.github.com/repos/${CONFIG.REPO}/issues`, {
                method: 'POST',
                headers: {
                    'Authorization': `token ${CONFIG.TOKEN}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    title: `帖子_${Date.now()}`,
                    body: content
                })
            });
            
            document.getElementById('postContent').value = "";
            loadPosts(); // 立即刷新
        }

        // 加载帖子
        async function loadPosts() {
            const response = await fetch(
                `https://api.github.com/repos/${CONFIG.REPO}/issues?t=${Date.now()}`
            );
            const posts = await response.json();
            
            document.getElementById('posts').innerHTML = posts.map(post => `
                <div class="post-card">
                    <div class="post-content">${post.body}</div>
                    <div class="post-footer">
                        <span>${new Date(post.created_at).toLocaleString()}</span>
                        <button onclick="showComments(${post.number})">
                            评论 (${post.comments})
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // 每3秒刷新
        setInterval(loadPosts, 3000);
        loadPosts();
    </script>
</body>
</html>